(this["webpackJsonploft-taxi-react"]=this["webpackJsonploft-taxi-react"]||[]).push([[0],{107:function(e,t,a){e.exports=a.p+"static/media/logo_light.c5c72fa9.svg"},108:function(e,t,a){e.exports=a.p+"static/media/logo_dark.3ed311ad.svg"},140:function(e,t,a){e.exports=a(165)},149:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=a(49),u=a(124),l=a(105),s=a(106),m=a(121),d=a(125),f=a(107),p=a.n(f),b=a(108),E=a.n(b),O=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.type,t=p.a;return"dark"===e&&(t=E.a),r.a.createElement("img",{alt:"logo","data-testid":"logo-component",className:"logo",src:t})}}]),a}(n.Component);O.defaultProps={type:"dark"};var j,g,h,v,_,N,x,T,y,S,k,C,A=O,L=A,w=a(199),R=a(203),I=a(167),F=a(37),U=a(25),D=a(8),X=a(23),z=a(215),q=a(218),P=Object(q.a)("LOFT-TAXI/AUTH/AUTH_REQUEST"),M=Object(q.a)("LOFT-TAXI/AUTH/SUCCESS"),B=Object(q.a)("LOFT-TAXI/AUTH/FAILURE"),H=Object(q.a)("LOFT-TAXI/AUTH/LOGOUT"),V=Object(q.a)("LOFT-TAXI/AUTH/REG_REQUEST"),W=!1,J=!1,Q=null,G=null,Y=Object(z.a)((j={},Object(D.a)(j,P,(function(){return!0})),Object(D.a)(j,M,(function(){return!1})),Object(D.a)(j,B,(function(){return!1})),Object(D.a)(j,H,(function(){return!1})),Object(D.a)(j,V,(function(){return!0})),j),W),$=Object(z.a)((g={},Object(D.a)(g,M,(function(){return!0})),Object(D.a)(g,B,(function(){return!1})),Object(D.a)(g,H,(function(){return!1})),g),J),K=Object(z.a)((h={},Object(D.a)(h,P,(function(){return null})),Object(D.a)(h,B,(function(e,t){return t.payload})),Object(D.a)(h,H,(function(){return null})),Object(D.a)(h,V,(function(){return null})),h),Q),Z=Object(z.a)((v={},Object(D.a)(v,P,(function(){return null})),Object(D.a)(v,M,(function(e,t){return t.payload})),Object(D.a)(v,B,(function(){return null})),Object(D.a)(v,H,(function(){return null})),Object(D.a)(v,V,(function(){return null})),v),G),ee=Object(X.c)({isLoading:Y,isAuthorized:$,errors:K,token:Z}),te=function(e){return e.auth.isLoading},ae=function(e){return e.auth.isAuthorized},ne=function(e){return e.auth.token},re=Object(q.a)("LOFT-TAXI/FETCH_CARD_REQUEST"),ce=Object(q.a)("LOFT-TAXI/CARD/SET_CARD_REQUEST"),oe=Object(q.a)("LOFT-TAXI/CARD/FETCH_CARD_SUCCESS"),ie=Object(q.a)("LOFT-TAXI/CARD/SET_CARD_SUCCESS"),ue=Object(q.a)("LOFT-TAXI/CARD/FETCH_CARD_FAILURE"),le=Object(q.a)("LOFT-TAXI/CARD/SET_CARD_FAILURE"),se=Object(q.a)("LOFT-TAXI/CARD/SET_PROFILE_DEFAULT"),me=!1,de=!1,fe=null,pe={},be=Object(z.a)((_={},Object(D.a)(_,ce,(function(){return!0})),Object(D.a)(_,ie,(function(){return!1})),Object(D.a)(_,re,(function(){return!0})),Object(D.a)(_,oe,(function(){return!1})),Object(D.a)(_,le,(function(){return!1})),Object(D.a)(_,ue,(function(){return!1})),Object(D.a)(_,se,(function(){return me})),_),me),Ee=Object(z.a)((N={},Object(D.a)(N,ce,(function(){return!1})),Object(D.a)(N,ie,(function(){return!0})),Object(D.a)(N,re,(function(){return!1})),Object(D.a)(N,oe,(function(){return!0})),Object(D.a)(N,le,(function(){return!1})),Object(D.a)(N,ue,(function(){return!1})),Object(D.a)(N,se,(function(){return de})),N),de),Oe=Object(z.a)((x={},Object(D.a)(x,ie,(function(e,t){return t.payload})),Object(D.a)(x,oe,(function(e,t){return t.payload})),Object(D.a)(x,se,(function(){return pe})),x),pe),je=Object(z.a)((T={},Object(D.a)(T,ce,(function(){return null})),Object(D.a)(T,ie,(function(){return null})),Object(D.a)(T,re,(function(){return null})),Object(D.a)(T,oe,(function(){return null})),Object(D.a)(T,le,(function(e,t){return t.payload})),Object(D.a)(T,ue,(function(e,t){return t.payload})),Object(D.a)(T,se,(function(){return fe})),T),fe),ge=Object(X.c)({isLoading:be,isExist:Ee,data:Oe,errors:je}),he=function(e){return e.card.isLoading},ve=function(e){return e.card.isExist},_e=function(e){return e.card.data},Ne=Object(q.a)("LOFT-TAXI/ROUTES/FETCH_ADDRESS_LIST_REQUEST"),xe=Object(q.a)("LOFT-TAXI/ROUTES/FETCH_ADDRESS_LIST_SUCCESS"),Te=Object(q.a)("LOFT-TAXI/ROUTES/FETCH_ADDRESS_LIST_FAILURE"),ye=Object(q.a)("LOFT-TAXI/ROUTES/FETCH_ROUTE_REQUEST"),Se=Object(q.a)("LOFT-TAXI/ROUTES/FETCH_ROUTE_SUCCESS"),ke=Object(q.a)("LOFT-TAXI/ROUTES/FETCH_ROUTE_FAILURE"),Ce=Object(q.a)("LOFT-TAXI/ROUTES/CANCEL_ORDER"),Ae=Object(q.a)("LOFT-TAXI/ROUTES/PLACE_ORDER"),Le=Object(q.a)("LOFT-TAXI/ROUTES/SET_ROUTES_DEFAULT"),we=[],Re=null,Ie=!1,Fe=[],Ue=Object(z.a)((y={},Object(D.a)(y,Ne,(function(){return[]})),Object(D.a)(y,xe,(function(e,t){return t.payload})),Object(D.a)(y,Te,(function(){return[]})),Object(D.a)(y,Le,(function(){return we})),y),we),De=Object(z.a)((S={},Object(D.a)(S,Ce,(function(){return!1})),Object(D.a)(S,Ae,(function(){return!0})),Object(D.a)(S,Le,(function(){return Ie})),S),Ie),Xe=Object(z.a)((k={},Object(D.a)(k,ye,(function(){return[]})),Object(D.a)(k,Se,(function(e,t){return t.payload})),Object(D.a)(k,ke,(function(){return[]})),Object(D.a)(k,Ce,(function(){return[]})),Object(D.a)(k,Le,(function(){return Fe})),k),Fe),ze=Object(z.a)((C={},Object(D.a)(C,Ne,(function(){return null})),Object(D.a)(C,xe,(function(){return null})),Object(D.a)(C,Te,(function(e,t){return t.payload})),Object(D.a)(C,ye,(function(){return null})),Object(D.a)(C,Se,(function(){return null})),Object(D.a)(C,ke,(function(e,t){return t.payload})),Object(D.a)(C,Le,(function(){return Re})),C),Re),qe=Object(X.c)({addressList:Ue,isBooked:De,errors:ze,route:Xe}),Pe=function(e){return e.routes.addressList},Me=function(e){return e.routes.isBooked},Be=function(e){return e.routes.route},He=(a(149),{authLogout:H,setProfileDefault:se}),Ve=Object(U.b)((function(e){return{isAuthorized:e.auth.isAuthorized}}),He)((function(e){var t=e.currentPage,a=e.authLogout,n=e.setProfileDefault,c=function(e){e.target.dataset.pageId===Vt.login.id&&(a(),n(),Le(),function(){if(localStorage.length&&localStorage.getItem("store"))localStorage.removeItem("store")}())},o=Object.values(Vt).map((function(e){if(!e.isNotInMenu){var a=e.id;return r.a.createElement("li",{key:a,className:a===t?"active":""},r.a.createElement(F.b,{to:e.path,onClick:c,"data-page-id":a},e.title))}}));return r.a.createElement(w.a,{"data-testid":"header",position:"static",color:"transparent",className:"header"},r.a.createElement(R.a,null,r.a.createElement(I.a,{className:"logo_wrapper"},r.a.createElement(L,{type:"dark"})),r.a.createElement("div",{className:"top_menu_wrapper"},r.a.createElement("ul",{className:"header_menu"},o))))})),We=(a(151),function(e){var t=e.children,a=e.pageId,n=e.className;return r.a.createElement("div",{"data-testid":"main-layout",className:"main_wrapper ".concat(n,"_page_wrapper")},r.a.createElement(Ve,{currentPage:a}),r.a.createElement("div",{className:"main_content"},r.a.createElement("div",{className:"content ".concat(n,"_content wrapper")},t)))}),Je=a(122),Qe=a(44),Ge="pk.eyJ1IjoibnVrYW50cmkiLCJhIjoiY2s4cW0yMHV4MDEwbzNmbnU0N2h1dm91byJ9.wVrxMygqN2Nfe5rt4fdUAw",Ye="https://loft-taxi.glitch.me/",$e=a(85),Ke=a.n($e),Ze=(a(152),function(e){var t=e.route,a=e.isBooked,c=Object(n.useState)(null),o=Object(Qe.a)(c,2),i=o[0],u=o[1],l=Object(n.useRef)(null);Object(n.useEffect)((function(){i||function(e){var t=e.setMap,a=e.mapContainer,n=new Ke.a.Map({accessToken:Ge,container:a.current,style:"mapbox://styles/mapbox/light-v10",center:[30.349351,59.9976819],zoom:12});n.on("load",(function(){t(n),n.resize()}))}({setMap:u,mapContainer:l})}),[i]),Object(n.useEffect)((function(){i&&t.length&&(d("route")&&(s("route"),m()),f(i,t))}),[t]),Object(n.useEffect)((function(){d("route")&&!a&&(s("route"),m())}),[a]);var s=function(e){i.removeLayer(e).removeSource(e)},m=function(){var e=document.querySelectorAll(".marker");[].forEach.call(e,(function(e){e.remove()}))},d=function(e){return!!i&&"undefined"!==typeof i.getLayer(e)},f=function(e,t){e.flyTo({center:t[0],zoom:12}),e.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ffc617","line-width":8}}),p(t[0],Object(Je.a)(t).pop())},p=function(e,t){var a=document.createElement("div");a.className="marker start",new Ke.a.Marker(a).setLngLat(e).addTo(i);var n=document.createElement("div");n.className="marker end",new Ke.a.Marker(n).setLngLat(t).addTo(i)};return r.a.createElement("div",{ref:l,className:"mapbox_container","data-testid":"mapBox"})}),et=a(205),tt=a(217),at=a(93),nt=a(216),rt=a(204),ct=(a(153),function(e){var t=e.cancelOrder;return r.a.createElement("div",{className:"is_booked_message","data-testid":"isBookedMessage"},r.a.createElement(I.a,{variant:"h4",component:"h1"},"\u0417\u0430\u043a\u0430\u0437 \u0440\u0430\u0437\u043c\u0435\u0449\u0451\u043d"),r.a.createElement(I.a,{component:"p"},"\u0412\u0430\u0448\u0435 \u0442\u0430\u043a\u0441\u0438 \u0443\u0436\u0435 \u0435\u0434\u0435\u0442 \u043a \u0432\u0430\u043c. \u041f\u0440\u0438\u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0431\u043b\u0438\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0447\u0435\u0440\u0435\u0437 10 \u043c\u0438\u043d\u0443\u0442."),r.a.createElement(rt.a,{className:"btn",size:"large",type:"submit",variant:"contained",color:"primary",onClick:t},"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"))}),ot=(a(154),{fetchAddressListRequest:Ne,fetchRouteRequest:ye,cancelOrder:Ce}),it=Object(U.b)((function(e){return{addressListDefault:Pe(e),isBooked:Me(e),route:Be(e)}}),ot)((function(e){e.route;var t=e.fetchAddressListRequest,a=e.fetchRouteRequest,c=(e.makeOrder,e.cancelOrder),o=e.addressListDefault,i=e.isBooked,u=Object(n.useState)(""),l=Object(Qe.a)(u,2),s=l[0],m=l[1],d=Object(n.useState)(""),f=Object(Qe.a)(d,2),p=f[0],b=f[1],E=Object(n.useState)(o),O=Object(Qe.a)(E,2),j=O[0],g=O[1],h=Object(n.useState)(!1),v=Object(Qe.a)(h,2),_=v[0],N=v[1];Object(n.useEffect)((function(){o.length||t()}),[]),Object(n.useEffect)((function(){var e=o.filter((function(e){return e!==s&&e!==p}));N(!(!s||!p)),g(e)}),[s,p]),Object(n.useEffect)((function(){return function(){x()}}),[]);var x=function(){m(""),b(""),g(o),c()};return r.a.createElement(et.a,{container:!0,className:"order_form_wrapper"},r.a.createElement(at.a,{className:"order_form_container"},i?r.a.createElement(ct,{cancelOrder:function(){x()}}):r.a.createElement("form",{onSubmit:function(e){return e.preventDefault(),!!(_&&s&&p)&&a({addressFrom:s,addressTo:p})},"data-testid":"orderForm"},r.a.createElement(et.a,{container:!0},r.a.createElement(et.a,{container:!0,className:"inputs_area"},r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(tt.a,{id:"routeFrom",className:"routeFrom",options:j,onChange:function(e,t){!function(e,t){m(t)}(0,t)},getOptionSelected:function(e){return e},renderInput:function(e){return r.a.createElement(nt.a,Object.assign({},e,{label:"\u041e\u0442\u043a\u0443\u0434\u0430",margin:"normal"}))}})),r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(tt.a,{id:"routeTo",className:"routeTo",options:j,onChange:function(e,t){!function(e,t){b(t)}(0,t)},getOptionSelected:function(e){return e},renderInput:function(e){return r.a.createElement(nt.a,Object.assign({},e,{label:"\u041a\u0443\u0434\u0430",margin:"normal"}))}}))),r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(rt.a,{className:"btn",disabled:!_,size:"large",type:"submit",variant:"contained",fullWidth:!0,color:"primary"},"\u0412\u044b\u0437\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0441\u0438"))))))})),ut=(a(155),function(e){var t=e.profileIsLoading;return r.a.createElement("div",{"data-testid":"emptyProfileModal"},!t&&r.a.createElement(at.a,{className:"empty_profile_message overlay",elevation:2},r.a.createElement(et.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(I.a,{variant:"h4",component:"h1"},"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043b\u0430\u0442\u0435\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(I.a,{component:"p"},"\u0427\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0430\u0448\u0438\u043d\u0443 - \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043b\u0430\u0442\u0451\u0436\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u044b \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f.")),r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(rt.a,{className:"btn",component:F.b,variant:"contained",color:"primary",to:Vt.profile.path},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043f\u0440\u043e\u0444\u0438\u043b\u044c")))))}),lt=(a(156),Object(U.b)((function(e){return{profileIsChecked:ve(e),profileIsLoading:he(e),isBooked:Me(e),route:Be(e)}}))((function(e){var t=e.profileIsLoading,a=e.profileIsChecked,n=e.isBooked,c=e.route,o=Vt.map.id;return r.a.createElement(We,{pageId:o,className:o},r.a.createElement("div",{"data-testid":"mapPage"},r.a.createElement(Ze,{isBooked:n,route:c}),r.a.createElement(et.a,{container:!0,className:"order_wrapper wrapper"},a?r.a.createElement(it,null):r.a.createElement(ut,{profileIsLoading:t}))))}))),st=a(113),mt=a(210),dt=a(220),ft=a(221),pt=a(207),bt=a(212),Et=a(211),Ot=a(34),jt=a(91),gt=a(114),ht=a.n(gt),vt=function(e){var t=e.onClick;return r.a.createElement("div",{"data-testid":"clearIcon",className:"clear_icon_wrapper icon_wrapper",onClick:t,style:{cursor:"pointer"}},r.a.createElement(ht.a,{style:{fontSize:24,color:"#ffb1b1"}}))},_t=vt,Nt=a(115),xt=a.n(Nt),Tt=function(){return r.a.createElement("div",{className:"help_icon icon_wrapper","data-testid":"helpIcon",style:{marginLeft:"5px",cursor:"pointer"}},r.a.createElement(xt.a,{style:{fontSize:18,color:"#747474"}}))},yt=a(24),St=a(214),kt=a(120),Ct=a(116),At=a(7),Lt=a(209),wt=Object(At.a)((function(){return{tooltip:{backgroundColor:"#fff",color:"#323232",border:"1px solid #999",display:"flex",justifyContent:"center",alignItems:"center",width:"194px",height:"55px",position:"relative"}}}))(Lt.a),Rt=a(118),It=a.n(Rt),Ft=a(117),Ut=a.n(Ft),Dt=(a(158),{setCardRequest:ce,fetchCardRequest:re}),Xt=Object(U.b)((function(e){return{isLoading:he(e),isExist:ve(e),card:_e(e),token:ne(e)}}),Dt)((function(e){var t=e.isExist,a=e.card,c=e.token,o=e.isLoading,i=e.fetchCardRequest,u=e.setCardRequest,l="form_profile",s=Object(n.useState)(!0),m=Object(Qe.a)(s,2),d=m[0],f=m[1];Object(n.useEffect)((function(){t||i({token:c})}),[]);var p={cardNumber:a.cardNumber,expiryDate:a.expiryDate||new Date,cardName:a.cardName,cvc:a.cvc},b="9999 9999 9999 9999",E="999",O=function(e){var t=e.replace(/[^\d]/g,"");return Object(jt.a)(b,t)},j=function(e){var t=e.replace(/[^\d]/g,"");return Object(jt.a)(E,t)},g=function(e){return e.replace(/[\d!@#$%^&*()_]/g,"")},h=function(e){return u(Object(st.a)({},e,{token:c}))},v=function(){return f(!d)},_=function(e){e.preventDefault()},N=function(e){"string"===typeof e&&(e=Object(Ct.a)(e));var t=parseInt(e.getMonth())+1;return(t=t>10?t:"0"+t)+"/"+String(e.getYear()).slice(-2)},x=function(e){var t={},a=e.cardNumber,n=e.cvc;return a?19!==a.length&&(t.cardNumber="\xab\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b\xbb \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 16 \u0446\u0438\u0444\u0440"):t.cardNumber="\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \xab\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b\xbb",e.cardName||(t.cardName="\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \xab\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430\xbb"),e.cvc?3!==n.length&&(t.cvc="\xabCVC\xbb \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 3 \u0446\u0438\u0444\u0440"):t.cvc="\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \xabCVC\xbb",t},T=Object(mt.a)((function(){return{input:{fontSize:"24px",fontWeight:"300",borderBottom:"1px solid rgba(234, 234, 234, .4)","&:hover":{"&:not(.Mui-disabled)":{"&:before":{borderBottom:"1px solid rgba(234, 234, 234, 1)"}}},"&:before":{borderBottomColor:"rgba(234, 234, 234, .4)"},"&:after":{borderBottomColor:"rgba(234, 234, 234, .4)"}}}}))(),y=function(e){var t=e.value,a=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ft.a,{style:{fontSize:"12px"},className:"".concat(l,"_label")},"\u0421\u0440\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0438\u044f:"),r.a.createElement(pt.a,{"data-testid":"expiryDate",className:T.input,type:"text",readOnly:!0,value:t,onClick:a}))},S=function(){return r.a.createElement(Ot.b,{onSubmit:h,initialValues:p,validate:x,mutators:{clearCardNumber:function(e,t,a){a.changeValue(t,"cardNumber",(function(){}))},clearCardName:function(e,t,a){a.changeValue(t,"cardName",(function(){}))}}},(function(e){var t=e.form,a=e.handleSubmit,n=e.submitting,c=e.pristine;return r.a.createElement("form",{className:"".concat(l," form_wrapper"),onSubmit:a,"data-testid":"profileForm"},r.a.createElement(et.a,{container:!0,align:"center"},r.a.createElement(et.a,{item:!0,xs:12,className:"".concat(l,"_header")},r.a.createElement(I.a,{variant:"h4",component:"h1"},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement(I.a,{component:"p"},"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"))),r.a.createElement(et.a,{container:!0,className:"cards_row",justify:"center",spacing:4},r.a.createElement(et.a,{item:!0,sm:6},r.a.createElement(Et.a,{className:"card bg_icon"},r.a.createElement(et.a,{container:!0,direction:"column",justify:"space-around",className:"card_col"},!o&&r.a.createElement(Ot.a,{name:"cardNumber",parse:O,render:function(e){var a=e.input,n=e.meta;return r.a.createElement(dt.a,{fullWidth:!0,className:"form_control"},r.a.createElement(ft.a,{className:"".concat(l,"_label"),htmlFor:"cardNumber"},"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b:"),r.a.createElement(pt.a,Object.assign({className:"".concat(l,"_input"),"data-testid":"cardNumber",id:"cardNumber"},a,{inputProps:{minLength:"19",maxLength:"19"},endAdornment:a.value.length>=1&&r.a.createElement(bt.a,{position:"end"},r.a.createElement(_t,{onClick:t.mutators.clearCardNumber})),required:!0})),n.touched&&n.error&&r.a.createElement("span",{className:"validation_error"},n.error))}}),!o&&r.a.createElement(Ot.a,{name:"expiryDate",render:function(e){var t=e.input;return r.a.createElement(yt.a,{utils:kt.a},r.a.createElement(St.a,Object.assign({format:"MM/yy",views:["month","year"]},t,{TextFieldComponent:function(e){var a=e.onClick;return r.a.createElement(y,{value:N(t.value),onClick:a})}})))}})))),r.a.createElement(et.a,{item:!0,sm:6},r.a.createElement(Et.a,{className:"card"},r.a.createElement(et.a,{container:!0,direction:"column",justify:"space-around",className:"card_col"},!o&&r.a.createElement(Ot.a,{name:"cardName",parse:g,render:function(e){var a=e.input,n=e.meta;return r.a.createElement(dt.a,{fullWidth:!0,className:"form_control"},r.a.createElement(ft.a,{className:"".concat(l,"_label"),htmlFor:"cardName"},"\u0418\u043c\u044f \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430:"),r.a.createElement(pt.a,Object.assign({"data-testid":"cardName",className:"".concat(l,"_input"),id:"cardName"},a,{inputProps:{maxLength:"20"},endAdornment:a.value.length>=1&&r.a.createElement(bt.a,{position:"end"},r.a.createElement(_t,{onClick:t.mutators.clearCardName})),required:!0})),n.touched&&n.error&&r.a.createElement("span",{className:"validation_error"},n.error))}}),!o&&r.a.createElement(Ot.a,{name:"cvc",parse:j,render:function(e){var t=e.input,a=e.meta;return r.a.createElement(dt.a,{fullWidth:!0,className:"form_control cvc_wrapper"},r.a.createElement(ft.a,{className:"".concat(l,"_label"),htmlFor:"cvc"},"CVC:",r.a.createElement(wt,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"popperArrow"}),r.a.createElement(I.a,{component:"p",style:{textAlign:"center",fontSize:"10px"}},"3 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u0446\u0438\u0444\u0440\u044b",r.a.createElement("br",null)," \u043d\u0430 \u043e\u0431\u043e\u0440\u043e\u0442\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435 \u043a\u0430\u0440\u0442\u044b"))},r.a.createElement("span",{style:{marginTop:"-3px"}},r.a.createElement(Tt,null)))),r.a.createElement(pt.a,Object.assign({"data-testid":"cvc",className:"".concat(l,"_input"),id:"cvc",inputProps:{minLength:"3"}},t,{type:d?"password":"text",endAdornment:r.a.createElement(bt.a,{position:"end"},r.a.createElement("div",{style:{opacity:.5,cursor:"pointer"},onClick:v,onMouseDown:_},d?r.a.createElement(Ut.a,null):r.a.createElement(It.a,null))),required:!0})),a.touched&&a.error&&r.a.createElement("span",{className:"validation_error"},a.error))}}))))),r.a.createElement(et.a,{item:!0,xs:12,align:"center",className:"form_footer"},r.a.createElement(rt.a,{className:"btn",disabled:o,size:"large",type:"submit",variant:"contained",color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement(rt.a,{className:"btn",disabled:n||c,size:"large",type:"submit",variant:"contained",color:"default",onClick:t.reset},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}))};return r.a.createElement(S,null)})),zt=(a(159),function(){var e=Vt.profile.id;return r.a.createElement(We,{className:e,pageId:e},r.a.createElement(et.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(et.a,{item:!0,sm:10},r.a.createElement(at.a,{className:"paper_container"},r.a.createElement(Xt,null)))))}),qt=(a(160),{authRequest:P,regRequest:V}),Pt=Object(U.b)((function(e){return{isLoading:te(e)}}),qt)((function(e){var t=e.isRegForm,a=void 0!==t&&t,n=e.authRequest,c=e.regRequest,o=e.isLoading,i={email:"",password:"",name:"",surname:""},u=function(e){var t=e.email,r=e.password,o=e.name,i=e.surname;return a?a?c({email:t,password:r,name:o,surname:i}):void 0:n({email:t,password:r})},l=function(e){var t={};return e.email||(t.email="\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \xab".concat(p,"\xbb")),e.password||(t.password="\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \xab\u041f\u0430\u0440\u043e\u043b\u044c\xbb"),a&&(e.name||(t.name="\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \xab\u0418\u043c\u044f\xbb"),e.surname||(t.surname="\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \xab\u0424\u0430\u043c\u0438\u043b\u0438\u044f\xbb")),t},s=a?"form_signup":"form_login",m=a?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0412\u043e\u0439\u0442\u0438",d=a?"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?":"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",f=a?" \u0412\u043e\u0439\u0442\u0438":" \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c",p=a?"\u0410\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b":"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",b=function(){return r.a.createElement(Ot.b,{onSubmit:u,initialValues:i,validate:l,mutators:{clearEmail:function(e,t,a){a.changeValue(t,"email",(function(){}))},clearName:function(e,t,a){a.changeValue(t,"name",(function(){}))},clearSurname:function(e,t,a){a.changeValue(t,"surname",(function(){}))},clearPassword:function(e,t,a){a.changeValue(t,"password",(function(){}))}}},(function(e){var t=e.form,n=e.handleSubmit,c=e.submitting;return r.a.createElement("form",{className:"form ".concat(s),id:"loft_taxi_form","data-testid":"authForm",onSubmit:n},r.a.createElement(et.a,{container:!0},r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(I.a,{variant:"h4",component:"h1"},m),r.a.createElement(I.a,{component:"p"},d,r.a.createElement(F.b,{to:a?Vt.login.path:Vt.signup.path,"data-testid":"change-form-page-link","data-page-id":a?Vt.login.id:Vt.signup.id},f))),r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(Ot.a,{name:"email",render:function(e){var a=e.input,n=e.meta;return r.a.createElement(dt.a,{fullWidth:!0,className:"form_control"},r.a.createElement(ft.a,{htmlFor:"email"},p),r.a.createElement(pt.a,Object.assign({id:"email"},a,{"data-testid":"login-input",endAdornment:a.value.length>=1&&r.a.createElement(bt.a,{position:"end"},r.a.createElement(vt,{onClick:t.mutators.clearEmail})),required:!0})),n.touched&&n.error&&r.a.createElement("span",{className:"validation_error"},n.error))}})),a&&r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,{item:!0,sm:6},r.a.createElement(Ot.a,{name:"name",render:function(e){var a=e.input,n=e.meta;return r.a.createElement(dt.a,{fullWidth:!0,className:"form_control"},r.a.createElement(ft.a,{htmlFor:"name"},"\u0418\u043c\u044f"),r.a.createElement(pt.a,Object.assign({id:"name"},a,{"data-testid":"name-input",endAdornment:a.value.length>=1&&r.a.createElement(bt.a,{position:"end"},r.a.createElement(vt,{onClick:t.mutators.clearName})),required:!0})),n.touched&&n.error&&r.a.createElement("span",{className:"validation_error"},n.error))}})),r.a.createElement(et.a,{item:!0,sm:6},r.a.createElement(Ot.a,{name:"surname",render:function(e){var a=e.input,n=e.meta;return r.a.createElement(dt.a,{fullWidth:!0,className:"form_control"},r.a.createElement(ft.a,{htmlFor:"surname"},"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),r.a.createElement(pt.a,Object.assign({id:"surname"},a,{"data-testid":"surname-input",endAdornment:a.value.length>=1&&r.a.createElement(bt.a,{position:"end"},r.a.createElement(vt,{onClick:t.mutators.clearSurname})),required:!0})),n.touched&&n.error&&r.a.createElement("span",{className:"validation_error"},n.error))}}))),r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(Ot.a,{name:"password",render:function(e){var a=e.input,n=e.meta;return r.a.createElement(dt.a,{fullWidth:!0,className:"form_control"},r.a.createElement(ft.a,{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(pt.a,Object.assign({type:"password",id:"password"},a,{"data-testid":"password-input",endAdornment:a.value.length>=1&&r.a.createElement(bt.a,{position:"end"},r.a.createElement(vt,{onClick:t.mutators.clearPassword})),required:!0})),n.touched&&n.error&&r.a.createElement("span",{className:"validation_error"},n.error))}})),r.a.createElement(et.a,{item:!0,xs:12,align:"right",className:"form_footer"},r.a.createElement(rt.a,{className:"btn",disabled:o||c,"data-testid":"formSubmitBtn",size:"large",type:"submit",variant:"contained",color:"primary"},"\u0412\u043e\u0439\u0442\u0438"))))}))};return r.a.createElement(b,null)})),Mt=(a(161),function(e){var t=e.className,a=e.pageId;return r.a.createElement("div",{"data-testid":"logout-layout",className:"main_wrapper logout_wrapper ".concat(t,"_page_wrapper")},r.a.createElement("div",{className:"main_content"},r.a.createElement("div",{className:"content ".concat(t,"_content wrapper")},r.a.createElement(et.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(et.a,{item:!0,xs:12,sm:6},r.a.createElement(et.a,{container:!0,justify:"center"},r.a.createElement(L,{type:"light"}))),r.a.createElement(et.a,{item:!0,xs:12,sm:6},r.a.createElement(at.a,{className:"paper_container"},r.a.createElement(Pt,{isRegForm:a===Vt.signup.id})))))))}),Bt=function(){var e=Vt.login.id;return r.a.createElement(Mt,{className:e,pageId:e})},Ht=function(){var e=Vt.signup.id;return r.a.createElement(Mt,{className:e,pageId:e})},Vt={map:{id:"map",path:"/map",title:"\u041a\u0430\u0440\u0442\u0430",component:lt},profile:{id:"profile",path:"/profile",title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",component:zt},login:{id:"login",path:"/",title:"\u0412\u044b\u0439\u0442\u0438",component:Bt},signup:{id:"signup",path:"/signup",component:Ht,isNotInMenu:!0}},Wt=function(e){var t=e.component,a=e.isAuthorized,n=e.redirectPath,c=void 0===n?Vt.signup.path:n,o=Object(u.a)(e,["component","isAuthorized","redirectPath"]);return r.a.createElement(i.b,Object.assign({},o,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(i.a,{to:c})}}))},Jt=Object(U.b)((function(e){return{isAuthorized:ae(e)}}))((function(e){var t=e.isAuthorized,a=Vt.map.path,n=Vt.login.path,c=Vt.signup.path;return t?r.a.createElement(i.d,null,r.a.createElement(Wt,{isAuthorized:t,path:a,component:lt}),r.a.createElement(Wt,{isAuthorized:t,path:Vt.profile.path,component:zt}),r.a.createElement(i.a,{to:a})):r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:n,component:Bt}),r.a.createElement(i.b,{path:c,component:Ht}),r.a.createElement(i.a,{to:c}))})),Qt=(a(162),function(){return r.a.createElement("div",{className:"app",id:"app","data-testid":"app"},r.a.createElement(Jt,null))}),Gt=a(119),Yt=a(213),$t=a(123),Kt=a(21),Zt=a.n(Kt),ea=a(13),ta=Ye,aa={"Content-Type":"application/json"},na="\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0442 \u0441\u0435\u0440\u0432\u0435\u0440\u0430: ",ra=function(e){return fetch("".concat(ta,"auth"),{method:"POST",headers:aa,body:JSON.stringify(e)}).then((function(e){return e.json()}))},ca=function(e){return fetch("".concat(ta,"register"),{method:"POST",headers:aa,body:JSON.stringify(e)}).then((function(e){return e.json()}))},oa=function(e){return fetch("".concat(ta,"card"),{method:"POST",headers:aa,body:JSON.stringify(e)}).then((function(e){return e.json()}))},ia=function(e){return fetch("".concat(ta,"card?token=").concat(e),{method:"GET",headers:aa}).then((function(e){return e.json()}))},ua=function(){return fetch("".concat(ta,"addressList"),{method:"GET",headers:aa}).then((function(e){return e.json()}))},la=function(e){var t=e.addressFrom,a=e.addressTo;return fetch("".concat(ta,"route?address1=").concat(t,"&address2=").concat(a),{method:"GET",headers:aa}).then((function(e){return e.json()}))},sa=Zt.a.mark(da),ma=Zt.a.mark(fa);function da(e){var t,a,n,r;return Zt.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(ea.a)(ra,e.payload);case 3:if(t=c.sent,a=t.success,n=t.token,r=t.error,!a){c.next=12;break}return c.next=8,Object(ea.b)(M(n));case 8:return c.next=10,Object(ea.b)(re({token:n}));case 10:c.next=15;break;case 12:if(!r){c.next=15;break}return c.next=15,Object(ea.b)(B(r));case 15:c.next=21;break;case 17:return c.prev=17,c.t0=c.catch(0),c.next=21,Object(ea.b)(B(na+c.t0.message));case 21:case"end":return c.stop()}}),sa,null,[[0,17]])}function fa(e){var t,a,n,r;return Zt.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(ea.a)(ca,e.payload);case 3:if(t=c.sent,a=t.success,n=t.token,r=t.error,!a){c.next=10;break}return c.next=8,Object(ea.b)(M(n));case 8:c.next=13;break;case 10:if(!r){c.next=13;break}return c.next=13,Object(ea.b)(B(r));case 13:c.next=19;break;case 15:return c.prev=15,c.t0=c.catch(0),c.next=19,Object(ea.b)(B(na+c.t0.message));case 19:case"end":return c.stop()}}),ma,null,[[0,15]])}var pa=Zt.a.mark(Ea),ba=Zt.a.mark(Oa);function Ea(e){var t;return Zt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ea.a)(ia,e.payload.token);case 3:if(!(t=a.sent).id){a.next=9;break}return a.next=7,Object(ea.b)(oe(t));case 7:a.next=11;break;case 9:return a.next=11,Object(ea.b)(ue(t.error));case 11:a.next=17;break;case 13:return a.prev=13,a.t0=a.catch(0),a.next=17,Object(ea.b)(ue(na+a.t0.message));case 17:case"end":return a.stop()}}),pa,null,[[0,13]])}function Oa(e){var t,a;return Zt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,Object(ea.a)(oa,t);case 4:if(!(a=n.sent).success){n.next=10;break}return n.next=8,Object(ea.b)(ie(t));case 8:n.next=12;break;case 10:return n.next=12,Object(ea.b)(le(a.error));case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(1),n.next=18,Object(ea.b)(le(na+n.t0.message));case 18:case"end":return n.stop()}}),ba,null,[[1,14]])}var ja=Zt.a.mark(ha),ga=Zt.a.mark(va);function ha(e){var t,a,n;return Zt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(ea.a)(ua,e.payload);case 3:if(t=r.sent,a=t.addresses,n=t.error,!a){r.next=10;break}return r.next=8,Object(ea.b)(xe(a.sort()));case 8:r.next=12;break;case 10:return r.next=12,Object(ea.b)(Te(n));case 12:r.next=18;break;case 14:return r.prev=14,r.t0=r.catch(0),r.next=18,Object(ea.b)(Te(na+r.t0.message));case 18:case"end":return r.stop()}}),ja,null,[[0,14]])}function va(e){var t;return Zt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ea.a)(la,e.payload);case 3:if(!(t=a.sent).length){a.next=11;break}return a.next=7,Object(ea.b)(Se(t));case 7:return a.next=9,Object(ea.b)(Ae());case 9:a.next=13;break;case 11:return a.next=13,Object(ea.b)(ke("\u041f\u043e\u0435\u0437\u0434\u043a\u0430 \u043d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430, \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u0431\u044b\u043b \u043f\u043e\u043b\u0443\u0447\u0435\u043d \u043c\u0430\u0440\u0448\u0440\u0443\u0442"));case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(0),a.next=19,Object(ea.b)(ke(na+a.t0.message));case 19:case"end":return a.stop()}}),ga,null,[[0,15]])}var _a=Zt.a.mark(Na);function Na(){return Zt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ea.c)(P,da);case 2:return e.next=4,Object(ea.c)(V,fa);case 4:return e.next=6,Object(ea.c)(re,Ea);case 6:return e.next=8,Object(ea.c)(ce,Oa);case 8:return e.next=10,Object(ea.c)(Ne,ha);case 10:return e.next=12,Object(ea.c)(ye,va);case 12:case"end":return e.stop()}}),_a)}var xa=Object(X.c)({auth:ee,card:ge,routes:qe}),Ta=Object($t.a)(),ya=function(e){var t=Object(X.e)(xa,e,Object(X.d)(Object(X.a)(Ta),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));return t.subscribe((function(){!function(e){localStorage.setItem("store",JSON.stringify(e))}({auth:t.getState().auth,card:t.getState().card,routes:t.getState().routes})})),Ta.run(Na),t},Sa=(a(164),ya(function(){if(localStorage.length){var e=localStorage.getItem("store");if(e)return JSON.parse(e)}return{}}()));o.a.render(r.a.createElement(U.a,{store:Sa},r.a.createElement(F.a,null,r.a.createElement(Yt.a,{theme:Gt.theme},r.a.createElement(Qt,null)))),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.57bc2e02.chunk.js.map